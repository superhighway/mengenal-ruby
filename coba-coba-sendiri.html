<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <!-- Use title if it's in the page YAML frontmatter -->
        <title>
          
            Coba-Coba Sendiri |
          
          Jalan Pintas: Mengenal Pemrograman Ruby
        </title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">
        <script src="js/vendor/modernizr-2.6.1.min.js"></script>
    </head>
    <body class="">
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <div id="hero">
          <h1>Jalan Pintas: Mengenal Pemrograman Ruby</h1>
          <p>Halo! <a href="http://nyan.catcyb.org/about.html" target="_blank">Saya</a> tulis ini supaya siapapun yang bisa pemrograman komputer dapat mengenal <a href="http://www.ruby-lang.org/en/" target="_blank">Ruby</a> dengan cepat. Snippet di bawah telah dites dengan Ruby 1.9.3, jadi kemungkinan besar tidak berlaku pada versi Ruby terdahulu. Jangan malu-malu kirim kritik dan saran melalui email ke <a href="mailto:thecatcyborg+jpruby@gmail.com">thecatcyborg+jpruby@gmail.com</a></p>
        </div>

				<div id="content">
	        <h1>Bagian 2: Coba-Coba Sendiri</h1>

<p>Ruby bahasa yang menarik bukan? Apakah kamu sudah mulai tertarik? Bagaimana kalau kamu coba instalasi Ruby dan coba-coba sendiri di komputermu?</p>

<h2>Install Ruby</h2>

<p>Jika kamu menggunakan sistem operasi Windows, Linux, atau Mac, cara install paling mudah adalah dengan menggunakan <a href="http://railsinstaller.org" target="_blank">Rails Installer</a>. Akan tetapi, installer tersebut menginstal Ruby dan Rails, juga membutuhkan bandwidth cukup kuat.</p>

<p>Berikut ini beberapa cara lain untuk instal Ruby pada Windows, Linux, dan Mac.</p>

<h3>Windows</h3>

<p>Kamu bisa download dan gunakan <a href="http://rubyinstaller.org/" target="_blank">RubyInstaller</a>.</p>

<h3>Linux</h3>

<p>Biasanya, package manager pada distro yang kamu pakai menyediakan Ruby. Jika kamu pakai Ubuntu, jalankan Terminal dan perintah berikut.</p>

<div class="highlight"><pre>apt-get install ruby
</pre></div>
<h3>MacOS</h3>

<p>Biasanya Mac sudah punya Ruby sendiri. Jika kamu ingin install versi lain dari yang sudah kamu punya, kamu perlu <a href="http://mxcl.github.com/homebrew/" target="_blank">install Homebrew</a> terlebih dahulu. Setelah menginstal brew, jalankan Terminal dan perintah berikut.</p>

<div class="highlight"><pre>brew install ruby
</pre></div>
<h2>Menggunakan Ruby di Terminal</h2>

<p>Jika kamu sudah selesai menginstal Ruby, kamu dapat menjalankannya di Terminal. Kamu dapat menggunakan Interactive Ruby Shell (irb) jika kamu ingin coba-coba kode dan langsung lihat hasilnya.</p>

<div class="highlight"><pre><span class="c"># Ketik irb di Terminal</span>
irb
</pre></div>
<p>Setelah itu, kamu dapat mengetik apapun dalam bahasa pemrograman Ruby, termasuk yang sudah kita pelajari pada bab sebelum ini. Sebagai info, berikut contoh penggunaan irb.</p>

<p><img src="./img/irb-screenshot.png" /></p>

<p>Cara lain adalah kamu tulis dulu code Ruby kamu di sebuah file, lalu jalankan filenya. Caranya seperti di bawah.</p>

<div class="highlight"><pre><span class="c1"># Isi file halo.rb</span>
<span class="nb">puts</span> <span class="s2">&quot;Hore instalasi Ruby selesai! :D&quot;</span>
</pre></div>
<div class="highlight"><pre><span class="c"># Jalankan halo.rb di Terminal</span>
ruby halo.rb
</pre></div>
<p>Jika kamu akan terus membaca bab ini, kamu akan perlu menggunakan kedua teknik di atas untuk menjalankan Ruby.</p>

<h2>Mengenal RubyGems: Ruby Dependency Manager</h2>

<p>RubyGem, atau singkatnya Gem, merupakan dependency manager untuk Ruby. Ini sangat berguna jika kamu ingin melakukan sesuatu seperti membuat permintaan HTTP dengan mudah. Kamu bisa dengan mudah menginstal dengan membuka Terminal dan menjalankan sebuah command. Berikut ini contoh cara menginstal Gem.</p>

<div class="highlight"><pre>gem install httparty <span class="c"># Install sebuah Gem untuk melakukan permintaan HTTP</span>
gem install yajl-ruby devise <span class="c"># Install 2 Gem, untuk parse JSON dan authentikasi</span>
</pre></div>
<p>Gem bisa kamu anggap seperti library, plugin, template, atau apapun yang sudah dibuat komunitas dan kemungkinan dipakai orang banyak. Kamu menggunakan Gem untuk menyelesaikan masalah yang ada pada program yang kamu buat dan masalah tersebut sudah dipecahkan orang lain.</p>

<p>Sebagai informasi, kamu dapat mengujungi dokumentasi <a href="http://httparty.rubyforge.org/" target="_blank">HTTParty</a>, <a href="https://github.com/brianmario/yajl-ruby" target="_blank">Yajl Ruby</a>, dan <a href="http://devise.plataformatec.com.br/" target="_blank">Devise</a>. Informasi tersebut sebenarnya dapat dicari melalui Google.</p>

<p>Ada banyak gem untuk menyelesaikan satu masalah. Contohnya, jika kamu ingin membuat aplikasi web, kamu dapat menggunakan Gem Rails, Sinatra, Padrino, dan banyak pilihan. Pilih saja yang kamu suka, dan pastikan kamu mengerti kelebihan dan kekurangan masing-masing Gem sebelum menggunakannya. Kalau sulit menentukan pilihan, pilih yang populer dan cukup aktif diupdate. Kalau kamu masih bingung dan penasaran pilih Gem, baca saja source codenya. Gem biasanya open source dan dihost di <a href="https://github.com/" target="_blank">GitHub</a>.</p>

<p>Untuk mengetahui Gem apa saja yang bagus, berikut ini beberapa situs yang dapat kamu kunjungi.</p>

<ul>
	<li><a href="https://rubygems.org/" target="_blank">RubyGems</a>: Tempat hosting Gem.</li>
	<li><a href="https://www.ruby-toolbox.com/" target="_blank">Ruby Toolbox</a>: Listing Gem dengan kategori dan statistik masing-masing. Bisa digunakan untuk membandingkan opsi Gem yang ingin kamu gunakan.</li>
	<li><a href="http://ruby5.envylabs.com/" target="_blank">Ruby5</a>: Podcast mengenai Ruby dan Rails.</li>
	<li><a href="http://thechangelog.com/tagged/ruby/" target="_blank">The ChangeLog</a>: Beberapa informasi open source terbaru.</li>
	<li><a href="http://railscasts.com/?type=free">RailsCasts</a>: Screencast mengenari Ruby dan Rails.</li>
</ul>

<h2>Coba di Terminal</h2>

<p>Berikut ini beberapa latihan untuk kamu coba-coba di Terminal. Kamu bisa menggunakan irb, atau buat file Ruby kemudian run di Terminal.</p>

<h3>Tulis/Baca File (Bahasa Elit: File I/O)</h3>

<p>Tujuan dari bab ini adalah untuk mengenal dokumentasi Ruby.</p>

<div class="highlight"><pre><span class="c1"># Tulis File</span>
<span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;coba-coba.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">file</span><span class="o">|</span>
  <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;halo ruby!&quot;</span><span class="p">)</span>
  <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot; hmmmmm</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">end</span>

<span class="c1"># Baca File</span>
<span class="n">isi_file</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;coba-coba.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">isi_file</span>
</pre></div>
<p>Coba Sendiri: Ada banyak mode untuk membuka file. Coba append sebuah kalimat ke file "coba-coba.txt". Coba juga gabungkan isi 2 text file.</p>

<p>Lihat <a href="http://www.ruby-doc.org/core-1.9.3/File.html" target="_blank">dokumentasi File</a> dan <a href="http://www.ruby-doc.org/stdlib-1.9.3/libdoc/tempfile/rdoc/Tempfile.html" target="_blank">TempFile</a> untuk lebih lanjutnya.</p>

<h3>Waktu dan Tanggal</h3>

<p>Ruby memiliki 1 class (Date) untuk merepresentasikan tanggal dan 2 class (Time dan DateTime) untuk waktu dan tanggal.</p>

<p>Time dan DateTime terlihat seperti kembaran, tetapi mereka sebenarnya berbeda. Time adalah wrapper untuk Unix-Epoch. Date dan DateTime menggunakan bilangan rasional dan "hari ke nol" untuk menyimpan data. Jadi, performance Time lebih cepat, namun batas atas dan bawah terikat pada waktu epoch (1970-2040 untuk integer 32 bit). Sementara, Date dan DateTime memiliki kisaran hampir tak terbatas, tetapi performancenya lebih lambat. Sebagai info, Ruby on Rails menggunakan DateTime supaya bisa me-wrap standar SQL DATETIME.</p>

<h4>Date</h4>

<div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;date&#39;</span>

<span class="nb">puts</span> <span class="no">Date</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">Date</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;2010-02-03&#39;</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">Date</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="s1">&#39;03-02-2010&#39;</span><span class="p">,</span> <span class="s1">&#39;%d-%m-%Y&#39;</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">Time</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">to_date</span>
</pre></div>
<h4>Time</h4>

<div class="highlight"><pre><span class="nb">puts</span> <span class="s2">&quot;Time&quot;</span>
<span class="n">t</span> <span class="o">=</span> <span class="no">Time</span><span class="o">.</span><span class="n">now</span>
<span class="nb">puts</span> <span class="n">t</span><span class="o">.</span><span class="n">to_i</span> <span class="c1"># berdasarkan Unix-Epoch</span>
<span class="nb">puts</span> <span class="n">t</span><span class="o">.</span><span class="n">mday</span>
<span class="nb">puts</span> <span class="n">t</span><span class="o">.</span><span class="n">day</span>
<span class="nb">puts</span> <span class="n">t</span><span class="o">.</span><span class="n">hour</span>
<span class="nb">puts</span> <span class="n">t</span><span class="o">.</span><span class="n">min</span>
<span class="nb">puts</span> <span class="n">t</span><span class="o">.</span><span class="n">mon</span>
<span class="nb">puts</span> <span class="n">t</span><span class="o">.</span><span class="n">month</span>
<span class="nb">puts</span> <span class="n">t</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;Sekarang tanggal %m/%d/%Y&quot;</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">t</span><span class="o">.</span><span class="n">getgm</span>
<span class="nb">puts</span> <span class="n">t</span><span class="o">.</span><span class="n">getutc</span>
<span class="nb">puts</span> <span class="n">t</span><span class="o">.</span><span class="n">getlocal</span><span class="p">;</span> <span class="nb">puts</span>

<span class="nb">puts</span> <span class="no">Time</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">Time</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="no">Time</span><span class="o">.</span><span class="n">at</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="nb">puts</span> <span class="no">Time</span><span class="o">.</span><span class="n">utc</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="s2">&quot;jan&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">Time</span><span class="o">.</span><span class="n">gm</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="s2">&quot;jan&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">Time</span><span class="o">.</span><span class="n">local</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="s2">&quot;jan&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>

<span class="nb">puts</span> <span class="no">Time</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;+07:00&quot;</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">Time</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;+08:00&quot;</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">Time</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;-05:00&quot;</span><span class="p">)</span>

<span class="nb">puts</span> <span class="s2">&quot;Aritmatika&quot;</span>
<span class="n">t</span> <span class="o">=</span> <span class="no">Time</span><span class="o">.</span><span class="n">now</span>
<span class="nb">puts</span> <span class="n">t</span> <span class="o">+</span> <span class="p">(</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span><span class="p">)</span>
<span class="n">t2</span> <span class="o">=</span> <span class="n">t</span> <span class="o">+</span> <span class="mi">2592000</span>
<span class="nb">puts</span> <span class="n">t2</span>
<span class="nb">puts</span> <span class="n">t2</span> <span class="o">-</span> <span class="n">t</span>
<span class="nb">puts</span> <span class="n">t2</span> <span class="o">-</span> <span class="mi">2592000</span>
</pre></div>
<h4>DateTime</h4>

<div class="highlight"><pre><span class="nb">puts</span> <span class="no">DateTime</span><span class="o">.</span><span class="n">now</span>
<span class="nb">puts</span> <span class="no">DateTime</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">DateTime</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="s1">&#39;+7&#39;</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">DateTime</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span><span class="o">-</span><span class="mi">11</span><span class="p">,</span><span class="o">-</span><span class="mi">26</span><span class="p">,</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span><span class="o">-</span><span class="mi">55</span><span class="p">,</span><span class="o">-</span><span class="mi">54</span><span class="p">,</span><span class="s1">&#39;+7&#39;</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">DateTime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="s1">&#39;2001-02-03T04:05:06+07:00&#39;</span><span class="p">,</span> <span class="s1">&#39;%Y-%m-%dT%H:%M:%S%z&#39;</span><span class="p">)</span>
<span class="nb">puts</span>
<span class="nb">puts</span> <span class="no">DateTime</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;2001-02-03T04:05:06+07:00&#39;</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">DateTime</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;20010203T040506+0700&#39;</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">DateTime</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;3rd Feb 2001 04:05:06 PM&#39;</span><span class="p">)</span>
<span class="nb">puts</span>
<span class="nb">puts</span> <span class="no">DateTime</span><span class="o">.</span><span class="n">httpdate</span><span class="p">(</span><span class="s1">&#39;Sat, 03 Feb 2001 04:05:06 GMT&#39;</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">DateTime</span><span class="o">.</span><span class="n">iso8601</span><span class="p">(</span><span class="s1">&#39;2001-02-03T04:05:06+07:00&#39;</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">DateTime</span><span class="o">.</span><span class="n">iso8601</span><span class="p">(</span><span class="s1">&#39;20010203T040506+0700&#39;</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">DateTime</span><span class="o">.</span><span class="n">iso8601</span><span class="p">(</span><span class="s1">&#39;2001-W05-6T04:05:06+07:00&#39;</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">DateTime</span><span class="o">.</span><span class="n">rfc3339</span><span class="p">(</span><span class="s1">&#39;2001-02-03T04:05:06+07:00&#39;</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">DateTime</span><span class="o">.</span><span class="n">rfc2822</span><span class="p">(</span><span class="s1">&#39;Sat, 3 Feb 2001 04:05:06 +0700&#39;</span><span class="p">)</span>
<span class="nb">puts</span> <span class="no">DateTime</span><span class="o">.</span><span class="n">xmlschema</span><span class="p">(</span><span class="s1">&#39;2001-02-03T04:05:06+07:00&#39;</span><span class="p">)</span>
</pre></div>
<ul>
  <li><a href="http://www.ruby-doc.org/core/Time.html" target="_blank">Dokumentasi Time</a></li>
  <li><a href="http://ruby-doc.org/stdlib/libdoc/date/rdoc/Date.html" target="_blank">Dokumentasi Date</a></li>
  <li><a href="http://www.ruby-doc.org/stdlib/libdoc/date/rdoc/DateTime.html" target="_blank">Dokumentasi DateTime</a></li>
</ul>

<h3>Membuat Permintaan HTTP dan Memparse Respons HTTP</h3>

<p>Berguna untuk interaksi dengan API seperti Facebook, Twitter...</p>

<div class="highlight"><pre><span class="c"># Instal Gem HTTParty</span>
gem install httparty
</pre></div>
<p>Mari kita coba melakukan permintaan HTTP ke Google.</p>

<div class="highlight"><pre><span class="c1"># Pakai HTTParty</span>
<span class="nb">require</span> <span class="s1">&#39;httparty&#39;</span>

<span class="n">response</span> <span class="o">=</span> <span class="no">HTTParty</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://www.google.com&#39;</span><span class="p">)</span>
<span class="nb">puts</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Response body</span><span class="se">\n</span><span class="s2">======&quot;</span>
<span class="nb">puts</span> <span class="n">response</span><span class="o">.</span><span class="n">body</span>
<span class="nb">puts</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Response status code</span><span class="se">\n</span><span class="s2">======&quot;</span>
<span class="nb">puts</span> <span class="n">response</span><span class="o">.</span><span class="n">code</span>
<span class="nb">puts</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Response headers</span><span class="se">\n</span><span class="s2">======&quot;</span>
<span class="nb">puts</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">inspect</span>
<span class="nb">puts</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Response message</span><span class="se">\n</span><span class="s2">======&quot;</span>
<span class="nb">puts</span> <span class="n">response</span><span class="o">.</span><span class="n">message</span>
</pre></div>
<p>Sekarang, mari kita coba melakukan permintaan HTTP ke Facebook API. Sebelumnya, kunjungi <a href="http://developers.facebook.com/tools/explorer" target="_blank">Facebook Graph Explorer</a> untuk mendapatkan access tokenmu.</p>

<div class="highlight"><pre><span class="nb">require</span> <span class="s1">&#39;httparty&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;json&#39;</span> <span class="c1"># untuk parse format JSON</span>
<span class="nb">require</span> <span class="s1">&#39;pp&#39;</span> <span class="c1"># untuk pretty_inspect</span>

<span class="n">access_token</span> <span class="o">=</span> <span class="s1">&#39;paste access tokenmu di sini&#39;</span>
<span class="n">response</span> <span class="o">=</span> <span class="no">HTTParty</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://graph.facebook.com/me/friends?fields=id,name,username&amp;access_token=</span><span class="si">#{</span><span class="n">access_token</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="o">.</span><span class="n">body</span>
<span class="nb">puts</span> <span class="no">JSON</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">body</span><span class="p">)</span><span class="o">.</span><span class="n">pretty_inspect</span>
</pre></div>
<p>Seru bukan? Sekarang coba buat permintaan HTTP untuk membuat listing foto yang diupload salah satu temanmu. Cek dokumentasi Facebook untuk mencari URL yang dapat memberimu data tersebut.</p>

<h3>Membuat Domain-Specific Language</h3>

<p>Domain-Specific Language (DSL) sangat berguna untuk mendefinisikan konfigurasi supaya mudah dibaca. Kamu akan menemui banyak DSL pada Gem seperti Rails atau Sinatra. Kunci dari pembuatan DSL adalah Metaprogramming.</p>

<div class="highlight"><pre><span class="k">class</span> <span class="nc">Resep</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">yang_dibutuhkan</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
    <span class="k">return</span> <span class="vi">@yang_dibutuhkan</span> <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">count</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="vi">@yang_dibutuhkan</span> <span class="o">=</span> <span class="o">[]</span> <span class="k">unless</span> <span class="vi">@yang_dibutuhkan</span>
    <span class="n">args</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">arg</span><span class="o">|</span>
      <span class="n">nama_ivar</span> <span class="o">=</span> <span class="ss">:&quot;@</span><span class="si">#{</span><span class="n">arg</span><span class="si">}</span><span class="ss">&quot;</span>
      <span class="vi">@yang_dibutuhkan</span> <span class="o">&lt;&lt;</span> <span class="n">nama_ivar</span>
      <span class="n">define_method</span><span class="p">(</span><span class="ss">:&quot;tambah_</span><span class="si">#{</span><span class="n">arg</span><span class="si">}</span><span class="ss">&quot;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">a</span><span class="o">|</span>
        <span class="nb">instance_variable_get</span><span class="p">(</span><span class="n">nama_ivar</span><span class="p">)</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
  
  <span class="n">yang_dibutuhkan</span> <span class="ss">:langkah</span><span class="p">,</span> <span class="ss">:bahan</span><span class="p">,</span> <span class="ss">:peralatan</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">judul</span><span class="p">)</span>
    <span class="vi">@judul</span> <span class="o">=</span> <span class="n">judul</span>
    <span class="n">dibutuhkan</span> <span class="o">=</span> <span class="nb">self</span><span class="o">.</span><span class="n">class</span><span class="o">.</span><span class="n">yang_dibutuhkan</span>
    <span class="p">(</span><span class="n">dibutuhkan</span> <span class="o">||</span> <span class="o">[]</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">nama_ivar</span><span class="o">|</span>
      <span class="nb">instance_variable_set</span><span class="p">(</span><span class="n">nama_ivar</span><span class="p">,</span> <span class="o">[]</span><span class="p">)</span>
    <span class="k">end</span>
<span class="cm">=begin</span>
<span class="cm"># Sudah diset melalui metaprogramming di atas</span>
<span class="cm">    @langkah = []</span>
<span class="cm">    @bahan = []</span>
<span class="cm">    @peralatan = []</span>
<span class="cm">=end</span>
  <span class="k">end</span>

<span class="cm">=begin</span>
<span class="cm"># Sudah didefine melalui metaprogramming di atas</span>

<span class="cm">  def tambah_langkah(langkah)</span>
<span class="cm">    @langkah &lt;&lt; langkah</span>
<span class="cm">  end</span>

<span class="cm">  def tambah_bahan(bahan)</span>
<span class="cm">    @bahan &lt;&lt; bahan</span>
<span class="cm">  end</span>
<span class="cm">  </span>
<span class="cm">  def tambah_peralatan(peralatan)</span>
<span class="cm">    @peralatan &lt;&lt; peralatan</span>
<span class="cm">  end</span>
<span class="cm">=end</span>
  
  <span class="k">def</span> <span class="nf">deskripsi</span>
    <span class="o">&lt;&lt;-</span><span class="no">EOL</span>
<span class="sh">==============================</span>
<span class="sh">   Resep Membuat #{@judul}</span>
<span class="sh">==============================</span>

<span class="sh"> Bahan-Bahan:</span>
<span class="sh">------------------------------</span>
<span class="sh">#{listing_bernomor @bahan}</span>

<span class="sh"> Peralatan:</span>
<span class="sh">------------------------------</span>
<span class="sh">#{listing_bernomor @peralatan}</span>

<span class="sh"> Langkah-Langkah:</span>
<span class="sh">------------------------------</span>
<span class="sh">#{listing_bernomor @langkah}</span>

<span class="no">    EOL</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">buat</span><span class="p">(</span><span class="n">judul</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">blok</span><span class="p">)</span>
    <span class="n">resep</span> <span class="o">=</span> <span class="no">Resep</span><span class="o">.</span><span class="n">new</span> <span class="n">judul</span>
    <span class="n">resep</span><span class="o">.</span><span class="n">instance_eval</span> <span class="o">&amp;</span><span class="n">blok</span>
    <span class="n">resep</span>
  <span class="k">end</span>
  
  <span class="kp">private</span>
  
  <span class="k">def</span> <span class="nf">listing_bernomor</span><span class="p">(</span><span class="n">listing</span><span class="p">)</span>
    <span class="n">listing</span><span class="o">.</span><span class="n">each_with_index</span><span class="o">.</span><span class="n">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">item</span><span class="p">,</span> <span class="n">index</span><span class="o">|</span>
      <span class="s2">&quot;</span><span class="si">#{</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="s2">. </span><span class="si">#{</span><span class="n">item</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">end</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">resep</span> <span class="o">=</span> <span class="no">Resep</span><span class="o">.</span><span class="n">buat</span> <span class="s2">&quot;Ayam Kukus&quot;</span> <span class="k">do</span>
  <span class="n">tambah_peralatan</span> <span class="s2">&quot;Panci Kukus&quot;</span>
  <span class="n">tambah_peralatan</span> <span class="s2">&quot;Garpu&quot;</span>
  
  <span class="n">tambah_bahan</span> <span class="s2">&quot;Ayam&quot;</span>
  <span class="n">tambah_bahan</span> <span class="s2">&quot;Bumbu (tidak wajib)&quot;</span>
  
  <span class="n">tambah_langkah</span> <span class="s2">&quot;Masukkan ayam ke dalam panci kukus&quot;</span>
  <span class="n">tambah_langkah</span> <span class="s2">&quot;Masukkan nasi secukupnya&quot;</span>
  <span class="n">tambah_langkah</span> <span class="s2">&quot;Tunggu sampai ayamnya cukup empuk&quot;</span>
  <span class="n">tambah_langkah</span> <span class="s2">&quot;Coba sesekali tusuk ayamnya untuk mengecek apakah sudah cukup empuk&quot;</span>
  <span class="n">tambah_langkah</span> <span class="s2">&quot;Sesudah selesai mengukus ayam, kasih bumbu secukupnya&quot;</span>
<span class="k">end</span>
<span class="nb">puts</span> <span class="n">resep</span><span class="o">.</span><span class="n">deskripsi</span>
</pre></div>
<p>Bagaimana? Mudah bukan? Coba buat method <code>tambah_*</code> supaya bisa menerima argumen berjumlah variabel. Coba juga buat method <code>listing_bernomor</code> dibuat secara dinamis oleh method <code>yang_dibutuhkan</code>.</p>

<p>Sumber-sumber:</p>
<ul>
  <li><a href="http://rubylearning.com/blog/2010/11/30/how-do-i-build-dsls-with-yield-and-instance_eval/" target="_blank">RubyLearning Blog: How do I build DSLs with yield and instance_eval?</a></li>
  <li><a href="http://gdakram.com/past/2010/11/20/simple_academia_dsl_in_ruby_tutorial/" target="_blank">music on intarwebz: Simple Academia DSL in Ruby Tutorial</a></li>
</ul>

<p><a class="next-chapter-button" href="appendix.html">>> Bab selanjutnya -- Bagian 3: Appendix</a></p>
<p><a class="next-chapter-button" href="."><< Bab sebelumnya -- Bagian 1: Dasar-Dasar Pemrograman Ruby</a></p>
				</div>
        <div id="fixed-menu">
          <a href="/" class="logo"></a><a href="javascript:void(0);" class="fixed-menu-item toggle-fixed-toc">Daftar Isi</a><a href="javascript:void(0);" class="fixed-menu-item toggle-snippet-runner">Coba Ruby</a><a href="/coba-coba-sendiri.html" class="fixed-menu-item">Install Ruby</a>
        </div>
				
				<div id="toc">
					<h2>Daftar Isi</h2>
					<ol>
						<li>
							<a href=".">Bagian 1: Dasar-Dasar Pemrograman Ruby</a>
							<ul>
								<li>Sekilas Ruby</li>
								<li>Konstanta dan Variabel</li>
								<li>Tipe dan Struktur Data</li>
								<li>Operasi Logika dan Aritmatika</li>
								<li>Statement Controls (if, elsif, else, while)</li>
								<li>Methods</li>
								<li>Proc</li>
								<li>Class</li>
								<li>Module</li>
								<li>Exceptions</li>
								<li>Throw dan Catch</li>
								<li>Mengenal Metaprogramming</li>
							</ul>
						</li>
						<li>
							<a href="coba-coba-sendiri.html">Bagian 2: Coba-Coba Sendiri</a>
							<ul>
								<li>
									Install Ruby
								</li>
								<li>
									Menggunakan Ruby di Terminal
								</li>
								<li>
									Mengenal RubyGems: Ruby Dependency Manager
								</li>
								<li>
									Coba di Terminal
									<ul>
										<li>Tulis/Baca File</li>
										<li>Tanggal dan Waktu</li>
										<li>Membuat Permintaan HTTP dan Memparse Respons HTTP</li>
										<li>Membuat Domain-Specific Language</li>
									</ul>
								</li>
							</ul>
						</li>
						<li>
							<a href="appendix.html">Appendix</a>
							<ul>
								<li>Terus Ruby Buat Apa?</li>
								<li>Install Ruby Multiversi</li>
								<li>Tempat Lain untuk Belajar Ruby</li>
							</ul>
						</li>
					</ol>
				</div>

				<div id='snippet-runner'>
					<div id='snippet-runner-code-content' class='snippet-runner-code-content'>puts "Halo Ruby!"</div>
					<div class='snippet-runner-code-actions'>
						<a href='javascript:void(0);' class='snippet-runner-code-action snippet-runner-code-action-run'>Jalankan</a>
					</div>
					<div class='snippet-runner-output-container'>
						<h3>Output</h3>
						<pre class='snippet-runner-output'>
						</pre>
					</div>
				</div>
				
				<script type="text/html" id="snippet-actions-template">
					<div class='snippet-actions'>
						<a class='snippet-action-run' href='javascript:void(0);'>Jalankan</a>
					</div>
				</script>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.0.min.js"><\/script>')</script>
				<script src="http://d1n0x3qji82z53.cloudfront.net/src-min-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="js/plugins.js"></script>
        <script src="js/main.js"></script>

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html>
