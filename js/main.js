(function(){function i(e){window.ace&&r!=null?r.getSession().setValue(e):$("#snippet-runner-code-content").html("<pre>"+e+"</pre>")}function s(){return window.ace&&r!=null?r.getSession().getValue():$("#snippet-runner-code-content").text()}var e={lines:17,length:12,width:4,radius:40,corners:1,rotate:0,color:"#888",speed:1,trail:60,shadow:!0,hwaccel:!1,className:"spinner",zIndex:2e9,top:"50px",left:"auto"},t=new Spinner(e),n=document.getElementById("snippet-runner-running-indicator"),r=null;window.ace&&(r=ace.edit("snippet-runner-code-content"),r.setTheme("ace/theme/twilight"),r.getSession().setMode("ace/mode/ruby"));var o=$("body"),u="http://localhost:4000",a=$("#snippet-request-error-template").text(),f=$("#snippet-runner");$("#snippet-request-error-template").remove(),$(".snippet-runner-code-action-run").click(function(){var e=f.find(".snippet-runner-output"),r=s();t.spin(n),$.post(u,{snippet:r},function(r,i,s){console.log(r),console.log(e),t.stop(n),e.text(r)}).fail(function(){t.stop(n),e.text(a)})}),$(".toggle-snippet-runner").click(function(){o.removeClass("fixed-toc-visible");var e="snippet-runner-visible";o.hasClass(e)?o.removeClass(e):o.addClass(e)}),$(".toggle-fixed-toc").click(function(){o.removeClass("snippet-runner-visible");var e="fixed-toc-visible";o.hasClass(e)?(o.removeClass(e),$("#content").off("click")):(o.addClass(e),$("#content").on("click",function(){$(".toggle-fixed-toc").click()}))}),$("#toc a").click(function(){o.removeClass("fixed-toc-visible")});if(o.hasClass("executable")){var l=$("#snippet-actions-template").html();$(".highlight").append(l).prepend(l),$("#snippet-actions-template").remove(),$(".snippet-action-run").click(function(){var e=$(this),t=e.parent().siblings("pre:first").text();i(t);var n="snippet-runner-visible";o.hasClass(n)||o.addClass(n),$(".snippet-runner-code-action-run").click()})}})();